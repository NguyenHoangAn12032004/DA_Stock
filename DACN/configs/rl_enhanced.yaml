project:
  seed: 42
  log_dir: logs_phase7
  model_dir: models_phase7
  figure_dir: reports/figures_phase7

data:
  tickers: [AAPL, NVDA, GOOG]
  start: 2010-01-01
  end: 2025-12-31
  interval: 1d
  dataset_path: data/processed/aapl_nvda_goog_daily.npz
  train_ratio: 0.8
  feature_window: 50
  technical_indicators:
    - rsi
    - macd
    - stochastic
    - williams_r
    - roc
    - bollinger
    - atr
    - adx
    - obv
    - mfi
    - cci

environment:
  initial_cash: 100000
  transaction_cost: 0.001
  max_position: 1.0
  reward_metric: differential_log_return
  window_size: 64
  reward_positive: 1.0
  reward_negative: -1.0
  reward_scale: 1.0
  action_threshold: 0.05
  direction_reward_weight: 0.5
  trade_penalty: 0.001
  direction_prob_threshold: 0.55
  # Advanced Rewards & Costs
  slippage_model: volatility
  slippage_bps: 5.0
  frequent_trade_penalty: 0.01
  sharpe_reward_weight: 0.1
  max_drawdown_penalty: 0.1
  # Dynamic threshold
  dynamic_threshold_enabled: true
  dynamic_threshold_vol_quantile: 0.75
  dynamic_threshold_reduction: 0.1
  # Regime-aware (V4 + V5 Aggressive)
  enable_regime_scaling: true
  regime_reward_k: 0.2
  bull_regime_threshold: 0.0
  bull_slippage_mult: 0.5
  bull_drawdown_mult: 0.5
  bull_trade_mult: 0.3
  # Phase 7: Macro Regime
  recession_cash_reward: 0.1
  expansion_invest_reward: 0.05
  bull_invest_reward: 0.1
  regime_trend_threshold: 1.2

agent:
  algorithm: RecurrentPPO
  total_timesteps: 7000000
  learning_rate: 0.000293
  gamma: 0.99
  gae_lambda: 0.863
  clip_range: 0.2
  n_steps: 512    # Optimized for LSTM (Faster updates)
  batch_size: 128 # Larger batch for stability
  ent_coef: 0.00005
  vf_coef: 0.5
  max_grad_norm: 0.5
  eval_freq: 50000
  policy_kwargs:
    net_arch: 
      pi: [128, 128] # Reduced from 256 for CPU Speed
      vf: [128, 128]
    lstm_hidden_size: 128 # Reduced from 256
    n_lstm_layers: 1
    shared_lstm: False
    enable_critic_lstm: True # Re-enabled per user request

training:
  train_start_date: 2010-01-01
  train_end_date: 2023-12-31

backtest:
  benchmark: buy_and_hold
  render: false
  save_plots: true
  evaluation_start: 2024-01-02
  evaluation_end: 2024-12-31

